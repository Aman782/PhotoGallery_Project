<% layout("./layouts/boilerplate.ejs") %>

<% if (success && success.length) { %>
    <div class="alert alert-info alert-dismissible fade show mt-2 mb-2" role="alert">
        <%= success %>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
<% } %>

<body>
    <h1 class="mt-3 p-2 position-relative py-2 px-4 text-bg border border-secondary rounded-pill fs-3 border-3">Gallery</h1>

    <div class="container">
        <div class="row">
            <div class="col-md-11">
                <form action="/listing/new" method="get" >
                    <button class="btn btn-lg btn-success float-sm-end mt-2 fs-6 fw-semibold">Upload Here!</button>
                </form>
            </div>
        </div>
    </div>

    <div class="container-fluid m-2 justify-content-center d-flex align-items-center p-3">
        <div class="row row-cols-lg-3 d-flex row-cols-md-2 row-cols-sm-1">
            <% for(let list of allListings) { %>
                <a href="/listing/<%= list.id %>" class="text-decoration-none">
                    <div class="card m-2 p-2 shadow-sm border border-2" style="width: 19rem; background-color: rgb(230, 245, 245);">
                        <img src="<%= list.image.url %>" class="card-img-top rounded" alt="..." style="height: 18rem;">
                        <div class="card-body txt-dec">
                            <h5 class="card-title fw-bold"><%= list.title %></h5>
                            <p class="card-text fw-semibold btn btn-primary"><%= list.country %></p>
                        </div>
                    </div>
                </a>
            <% } %>
        </div>
    </div>
</body>
